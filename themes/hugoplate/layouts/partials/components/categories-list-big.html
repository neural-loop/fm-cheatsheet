<div class="bg-theme-light bg-green-400 rounded p-8">
  <ul class="space-y-4">
    {{ $sections := getJSON "assets/sections.json" }}
    {{ range $sections.sections }}
    <li>
      <h2 id="{{ .name | urlize }}" class="mb-4 px-0 py-0 pr-1 font-normal">{{ .name }}</h2>
      <ul class="space-y-4">
        {{ $section := . }}
        <!-- Collect matching pages into a slice -->
        {{ $matchingPages := slice }}
        {{ range where $.Site.RegularPages "Section" "foundation-model-resources" }}
        {{ $sectionID := .Params.section_id | int }}
        {{ $sectionNumber := $section.number | int }}
        {{ if eq $sectionID $sectionNumber }}
        {{ $matchingPages = $matchingPages | append . }}
        {{ end }}
        {{ end }}
        <!-- Sort the slice by section_id -->
        {{ $sortedPages := sort $matchingPages "Params.section_id" "asc" }}
        {{ range $sortedPages }}
          {{ $data := getJSON "assets/resources.json" }}
          {{ $filteredData := where $data "categories" "intersect" (.Params.short_name | slice) }}
          {{ $filteredDataVision := where $filteredData "modalities" "intersect" (slice "Vision") }}
          {{ $filteredDataText := where $filteredData "modalities" "intersect" (slice "Text") }}
          {{ $filteredDataSpeech := where $filteredData "modalities" "intersect" (slice "Speech") }}
          {{ $entryCount := len $filteredData }}
          {{ $filteredDataVision := len $filteredDataVision }}
          {{ $filteredDataText := len $filteredDataText }}
          {{ $filteredDataSpeech := len $filteredDataSpeech }}
        <!-- Display content for matching pages -->
        <li class="flex items-start justify-between align-text-top">
          <a class="hover:text-primary dark:hover:text-darkmode-primary flex items-start"
             href="{{ .Permalink }}" style="min-width: 150px;">
            {{ partial "image" (dict "Src" .Params.image "Context" .Page
        "Alt" .Title "Size" "250x" "Command" "Resize" "Class" "m-0 pl-4   sm:hidden lg:inline") }}
            <div class="flex flex-col justify-center ml-4"> <!-- Center text along vertical axis -->
              <h3 class="font-normal inline-block">{{ .Params.short_name }}</h3>
              <span class="inline">
                Resources {{ $entryCount }}
               Vision {{ $filteredDataVision }}
                Speech {{ $filteredDataSpeech }}
                Text {{ $filteredDataText }}
              </span>
                            <p>{{ .Description }}<br>

              </p> <!-- Description on a new line -->
            </div>
          </a>

          <!--      <div class="">-->
          <!--        <div-->
          <!--          class="bg-gray-300 font-bold text-center text-black px-0 py-0 rounded-lg"-->
          <!--          style="min-width: 130px; margin-left: auto;">Total {{ $entryCount }}-->
          <!--        </div>-->
          <!--        <div-->
          <!--          class="bg-green-300 font-bold text-center text-black px-0 py-0 rounded-lg"-->
          <!--          style="min-width: 130px; margin-left: auto;"> &lt;!&ndash; Align count to the right &ndash;&gt;-->
          <!--          <i class="fas fa-eye fa-lg p-0 m-0 pr-1" style="min-width:10px"></i> Vision {{ $filteredDataVision }}-->
          <!--        </div>-->
          <!--        <div-->
          <!--          class="bg-yellow-200 font-bold text-center text-black px-0  py-0 rounded-lg"-->
          <!--          style="min-width: 130px; margin-left: auto;"> &lt;!&ndash; Align count to the right &ndash;&gt;-->
          <!--          <i class="fas fa-microphone fa-lg p-0 m-0 pr-1" style="min-width:10px"></i> Speech {{ $filteredDataSpeech }}-->
          <!--        </div>-->
          <!--        <div-->
          <!--          class="bg-fuchsia-200 font-bold text-center text-black px-0 py-0 rounded-lg"-->
          <!--          style="min-width: 150px; margin-left: auto;"> &lt;!&ndash; Align count to the right &ndash;&gt;-->
          <!--          <i class="fas fa-file fa-lg p-0 m-0" ></i> Text {{ $filteredDataText }}-->
          <!--        </div>-->
          <!--      </div>-->

        </li>
        <!-- Add more content display as needed -->
        {{ end }}
      </ul>
    </li>
    {{ end }}
  </ul>
</div>
